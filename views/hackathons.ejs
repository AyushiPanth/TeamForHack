<%- include('partials/header'); -%>
<!-- <%- include('sidenav'); -%> -->
<div id="content" class="hackathon-cont">
    <p hidden class="userid"><%= user._id %></p>
    <div class="hackathon-left">
        <div style="width: 300px;display: flex;
        flex-direction: column;align-items: center; position: fixed;
        background-color: #fafafa;" >
            <div style="width: 100%;" >
                <a href="/user/dashboard" class="ml-2 mt-2 back-crcle">
                   <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
            </div> 
           <h2 class="mb-1 text-center pt-3"> Hackathons</h2>
           <span class="underline mb-4" style="width: 40%;" ></span>
        </div>

        <div class="text-center hacks">
            <% hacksCurrent.forEach((hackathon) => { %>
                <p class="<%= hackathon.id %>" style="color:black"><%= hackathon.title %></p>
            <% }) %>
            <% hacksFinished.forEach((hackathon) => { %>
                <p class="<%= hackathon.id %>" ><%= hackathon.title %></p>
            <% }) %>
        </div>
    </div>
    <div class="hackathon-right">
        <input type="checkbox" onclick="takePart(this)"> Are you taking part in this hackathon? </button>
        <% hacksCurrent.forEach((hackathon) => { %>
            <% hackathon.participants.forEach((user) => { %>
                <p ><%= user.name %></p>
            <% }) %>
        <% }) %>
    </div>
    </div>
</div>



<%- include('partials/footer'); -%>
<script>
    
    function takePart(e){
        console.log(document.querySelector('.userid').textContent.trim());
        const uri = "http://localhost:3000/user/hackathons/insert/5fd522b43053250f20c2d36b/"+document.querySelector('.userid').textContent.trim();
        console.log(uri);
        if(e.checked){
            fetch(uri, {
                method: 'POST'
            })
        }
        else {
            fetch(uri, {
                method: 'DELETE'
            })
        }
    }
</script>